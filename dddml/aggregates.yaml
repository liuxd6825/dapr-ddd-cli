aggregates:
  User:
    # ----------------------------------
    properties:
      Id:
        type: string
      UserCode:
        type: string
      UserName:
        type: string
      Email:
        type: string
      IsDelete:
        type: bool
      Address:
        type: Address
      Contacts:
        type:  ContactItem
        isArray: true

    # ----------------------------------
    fields:
      UserFields:
        properties:
          Id:
            type: string
            validate: "gt=0"
            description: ""
          UserCode:
            type: string
          UserName:
            type: string
          Email:
            type: string
          Address:
            type: Address
      UserDeleteFields:
        properties:
          Id:
            type: string
      ContactFields:
        properties:
          Id:
            type: string
            validate: "gt=0"
            description: ""
          ContactType:
            type: ContactType
          ContactValue:
            type: string
      ContactDeleteFields:
        properties:
          Id:
            type: string
          UserId:
            type: string
    # ----------------------------------
    commands:
      UserCreateCommand:
        description: 新建用户命令
        aggregateId: Data.Id
        action: create
        event: UserCreateEvent
        properties:
          Data:
            type: UserFields
            referenceType: UserFields
            description: 业务数据
      UserUpdateCommand:
        description: 更新用户命令
        aggregateId: Data.Id
        action: update
        event: UserUpdateEvent
        properties:
          Data:
            type: UserFields
            referenceType: UserFields
            description: 业务数据
      UserDeleteCommand:
        description: 删除用户命令
        aggregateId: data.id
        event: UserDeleteEvent
        action: delete
        properties:
          Data:
            type: UserDeleteFields
            referenceType: UserDeleteFields
            description: 业务数据
      ContactCreateCommand:
        description: 添加联系方式
        aggregateId: Data.UserId
        action: create
        event: ContactCreateEventV1
        properties:
          Data:
            type: Contact
            referenceType: Contact
      ContactUpdateCommand:
        description: 更新联系方式
        aggregateId: Data.UserId
        action: update
        event: ContactUpdateEventV1
        properties:
          Data:
            type: Contact
            referenceType: Contact
      ContactDeleteCommand:
        description: 删除联系方式
        aggregateId: Data.UserId
        event: ContactDeleteEventV1
        action: delete
        properties:
          Data:
            type: ContactDeleteFields
            referenceType: ContactDeleteFields
    # ----------------------------------
    events:
      UserCreateEventV1:
        aggregateId: Data.Id
        eventType: UserCreateEvent
        action: create
        version: V1
        properties:
          data:
            type: UserFields
      UserUpdateEventV1:
        aggregateId: Data.Id
        eventType: UserUpdateEvent
        version: V1
        action: update
        properties:
          data:
            type: UserFields
      UserDeleteEventV1:
        aggregateId: Data.Id
        eventType: UserDeleteEvent
        version: V1
        action: delete
        properties:
          data:
            type: UserDeleteFields
      ContactCreateEventV1:
        aggregateId: Data.Id
        eventType: ContactCreateEvent
        action: create
        version: V1
        to: Contact
        properties:
          data:
            type: UserFields
      ContactUpdateEventV1:
        aggregateId: Data.Id
        eventType: ContactUpdateEvent
        version: V1
        action: update
        to: Contact
        properties:
          data:
            type: UserFields
      ContactDeleteEventV1:
        aggregateId: Data.Id
        eventType: ContactDeleteEvent
        version: V1
        action: delete
        to: Contact
        properties:
          UserId:
            type: stirng
          Id:
            type: string
    # ----------------------------------
    entities:
      Contact:
        id:
          name: UserId
        properties:
          Id:
            type: string
          UserId:
            type: string
          ContactType:
            type: ContactType
          ContactValue:
            type: string
    # ----------------------------------
    valueObjects:
      Address:
        properties:
          Province:
            type: string
          City:
            type: string
          Detail:
            type: string
    # ----------------------------------
    enumObjects:
      ContactType:
        baseType: string
        values:
          Phone:
            description: 电话
          QQ:
            description: QQ号
          WeChat:
            description: 微信号
    # ----------------------------------
    query:
      projections:
        UserView:
          properties:
            Id:
              type: string
              validate: "gt=0"
              description: ""
            UserCode:
              type: string
            UserName:
              type: string
            Email:
              type: string
            Telephone:
              type: string
            IsDelete:
              type: bool
            Addresses:
              type: string




