aggregates:
  User:
    # ----------------------------------
    properties:
      Id:
        type: string
      UserCode:
        type: string
      UserName:
        type: string
      Email:
        type: string
      Telephone:
        type: string
      IsDelete:
        type: bool
      Addresses:
        type: string
      Items:
        type: Item
        isArray: true
    # ----------------------------------
    fields:
      UserFields:
        properties:
          TenantId:
            type: string
          Id:
            type: string
            validate: "gt=0"
            description: ""
          UserCode:
            type: string
          UserName:
            type: string
          Email:
            type: string
          Telephone:
            type: string
          IsDelete:
            type: bool
          Addresses:
            type: string
      UserDeleteFields:
        properties:
          Id:
            type: string
    # ----------------------------------
    commands:
      UserCreateCommand:
        description: 新建用户命令
        aggregateId: Data.Id
        action: create
        event: UserCreateEvent
        properties:
          data:
            type: UserFields
            referenceType: UserFields
            description: 业务数据
      UserUpdateCommand:
        description: 更新用户命令
        aggregateId: Data.Id
        action: update
        event: UserUpdateEvent
        properties:
          data:
            type: UserFields
            referenceType: UserFields
            description: 业务数据
      UserDeleteCommand:
        description: 删除用户命令
        aggregateId: data.id
        event: UserDeleteEvent
        action: delete
        properties:
          data:
            type: UserDeleteFields
            referenceType: UserDeleteFields
            description: 业务数据
    # ----------------------------------
    events:
      UserCreateEventV1:
        aggregateId: Data.Id
        eventType: UserCreateEvent
        action: create
        properties:
          data:
            type: UserFields
      UserUpdateEventV1:
        aggregateId: Data.Id
        eventType: UserUpdateEvent
        version: 1.0
        action: update
        properties:
          data:
            type: UserFields
      UserDeleteEventV1:
        aggregateId: Data.Id
        eventType: UserDeleteEvent
        version: 1.0
        action: delete
        properties:
          data:
            type: UserDeleteFields
    # ----------------------------------
    factory:
      NewUserCreateEvent:
        paramter:
          cmd:
            type: UserCreateCommand
        return:
          name: res
          type: UserCreateEvent
        mappingType: auto
      NewUserUpdateEvent:
        paramter:
          cmd:
            type: UserUpdateCommand
        return:
          name: res
          type: UserUpdateEvent
        mappingType: auto
    # ----------------------------------
    entities:
      Item:
        id:
          name: ItemId
        properties:
          ItemId:
            type: string
          TimePeriod:
            type: TimePeriod
          MileAge:
            type: long
          WheelId:
            type: WheelId
    # ----------------------------------
    valueObjects:
      TimePeriod:
        properties:
          From:
            type: DateTime
          To:
            type: DataTime
      TireWheelIdPair:
        properties:
          TireId:
            type: string
          WheelId:
            type: WheelId
    # ----------------------------------
    enumObjects:
      WheelId:
        baseType: string
        values:
          LE:
            description: left front
          LR:
            description: left rear
          RF:
            description: right front
          RR:
            description: right rear
    # ----------------------------------
    query:
      projections:
        UserView:
          properties:
            Id:
              type: string
              validate: "gt=0"
              description: ""
            UserCode:
              type: string
            UserName:
              type: string
            Email:
              type: string
            Telephone:
              type: string
            IsDelete:
              type: bool
            Addresses:
              type: string
      handlers:
        UserQueryHandler:
          onEvents:
            OnUserCreateEventV1:
              event: UserCreateEventV1
              projection: UserView
            OnUserUpdateEventV1:
              event: UserUpdateEventV1
            OnUserDeleteEventV1:
              event: UserDeleteEventV1




